'use strict';
angular.module('ds.datepicker', ["dateParser"]), function () {
    angular.module('ds.datepicker').controller('dsDatepickerCtrl', ["$scope","$document","$log",function(e,t,n){var a;e.pickerState=!1,e.flipPickerState=function(t){e.pickerState?e.disablePicker(t):e.enablePicker(t)},e.enablePicker=function(n){if(e.pickerState=!0,!a){var r=!1;a=function(){r?(e.disablePicker(),e.$digest()):r=!0},t.on("click",a)}},e.disablePicker=function(){e.pickerState=!1,a&&(t.off("click",a),a=void 0)}}]);
}(), function () {
    angular.module('ds.datepicker').factory('dsDatepickerService', function () {
        function e(e, t) {
            return e.setDate(e.getDate() + (t || 1));
        }
        function t(e, t) {
            return e.setDate(e.getDate() - (t || 1));
        }
        function n(e, t) {
            return e.setMonth(e.getMonth() - (t || 1));
        }
        function a(e, t) {
            return e.setMonth(e.getMonth() + (t || 1));
        }
        function r(e) {
            var t, n = [];
            e.setDate(1), t = e.getDay(), e.setDate(-1 * t + (0 === t ? -6 : 1));
            for (var a = 0; 42 > a; a++)
                n.push(new Date(e.setDate(e.getDate() + 1)));
            return n;
        }
        var i;
        return i = {
            increaseDate: e,
            decreaseDate: t,
            increaseMonth: a,
            decreaseMonth: n,
            generateDateArray: r
        };
    });
}(), function () {
    angular.module('ds.datepicker').directive('dsDateFormat', ["$log","$filter","$dateParser",function(e,t,n){return{restrict:"EA",require:"^ngModel",link:function(e,a,r,i){function c(e){return u(e,r.format)}function o(e){return n(e,r.format)}var u=t("date");i.$formatters.push(c),i.$parsers.push(o)}}}]);
}(), function () {
    angular.module('ds.datepicker').directive('dsDatepicker', ["$document","$log","dsDatepickerService","$locale",function(e,t,n,a){return{restrict:"EA",require:"^ngModel",controller:"dsDatepickerCtrl",scope:{date:"=?ngModel",config:"=?"},link:function(e,t,a,r){function i(t){var a;a=new Date(t),e.currentDate&&a.getMonth()==e.currentDate.getMonth()||(e.dates=n.generateDateArray(new Date(t))),e.currentDate=a}e.disabled=!1,e.dates=[],e.currentDate=void 0,e.setDate=function(t){if(t&&e.date&&e.date instanceof Date){var n,a,i,c;n=e.date.getHours(),a=e.date.getMinutes(),i=e.date.getSeconds(),c=e.date.getMilliseconds(),t.setHours(n,a,i,c)}r.$setViewValue(t)},e.addDate=function(){r.$setViewValue(new Date(n.increaseDate(e.date)))},e.subDate=function(){r.$setViewValue(new Date(n.decreaseDate(e.date)))},e.addMonth=function(){r.$setViewValue(new Date(n.increaseMonth(e.date)))},e.subMonth=function(){r.$setViewValue(new Date(n.decreaseMonth(e.date)))},function(){r.$formatters.push(function(e){return i(e),e}),r.$parsers.push(function(e){return i(e),e}),angular.element(t[0].querySelector(".datepicker-inputField")).bind("keydown",function(t){38===t.keyCode?e.addDate():40===t.keyCode&&e.subDate(),e.$apply()}),a.$observe("disabled",function(t){e.disabled=t})}()},templateUrl:"src/templates/dsDatepicker.tpl.html"}}]);
}();