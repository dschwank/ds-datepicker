'use strict';
angular.module('ds.datepicker', ["dateParser"]), function () {
    angular.module('ds.datepicker').controller('dsDatepickerCtrl', ["$scope","$document","$log",function(e,t){var n;e.pickerState=!1,e.flipPickerState=function(t){e.pickerState?e.disablePicker(t):e.enablePicker(t)},e.enablePicker=function(){if(e.pickerState=!0,!n){var r=!1;n=function(){r?(e.disablePicker(),e.$digest()):r=!0},t.on("click",n)}},e.disablePicker=function(){e.pickerState=!1,n&&(t.off("click",n),n=void 0)}}]);
}(), function () {
    angular.module('ds.datepicker').directive('dsDateFormat', ["$log","$filter","$dateParser",function(e,t,n){return{restrict:"EA",require:"^ngModel",link:function(e,r,a,i){function c(e){return u(e,a.format)}function o(e){return n(e,a.format)}var u=t("date");i.$formatters.push(c),i.$parsers.push(o)}}}]);
}(), function () {
    angular.module('ds.datepicker').directive('dsDatepicker', ["$document","$log","dsDatepickerService","$locale",function(e,t,n){return{restrict:"EA",require:"^ngModel",controller:"dsDatepickerCtrl",scope:{date:"=?ngModel",config:"=?"},link:function(e,t,r,a){function i(t){var r;r=new Date(t),e.currentDate&&r.getMonth()==e.currentDate.getMonth()||(e.dates=n.generateDateArray(new Date(t))),e.currentDate=r}e.dates=[],e.currentDate=void 0,e.setDate=function(e){a.$setViewValue(e)},e.addDate=function(){a.$setViewValue(new Date(n.increaseDate(e.date)))},e.subDate=function(){a.$setViewValue(new Date(n.decreaseDate(e.date)))},e.addMonth=function(){a.$setViewValue(new Date(n.increaseMonth(e.date)))},e.subMonth=function(){a.$setViewValue(new Date(n.decreaseMonth(e.date)))},function(){a.$formatters.push(function(e){return i(e),e}),a.$parsers.push(function(e){return i(e),e}),angular.element(t[0].querySelector(".datepicker-inputField")).bind("keydown",function(t){38===t.keyCode?e.addDate():40===t.keyCode&&e.subDate(),e.$apply()})}()},templateUrl:"src/templates/dsDatepicker.tpl.html"}}]);
}(), function () {
    angular.module('ds.datepicker').factory('dsDatepickerService', function () {
        function e(e, t) {
            return e.setDate(e.getDate() + (t || 1));
        }
        function t(e, t) {
            return e.setDate(e.getDate() - (t || 1));
        }
        function n(e, t) {
            return e.setMonth(e.getMonth() - (t || 1));
        }
        function r(e, t) {
            return e.setMonth(e.getMonth() + (t || 1));
        }
        function a(e) {
            var t, n = [];
            e.setDate(1), t = e.getDay(), e.setDate(-1 * t + (0 === t ? -6 : 1));
            for (var r = 0; 42 > r; r++)
                n.push(new Date(e.setDate(e.getDate() + 1)));
            return n;
        }
        var i;
        return i = {
            increaseDate: e,
            decreaseDate: t,
            increaseMonth: r,
            decreaseMonth: n,
            generateDateArray: a
        };
    });
}();